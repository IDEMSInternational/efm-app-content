{
  "flow_type": "template",
  "flow_name": "efm_pd_body_template",
  "status": "released",
  "rows": [
    {
      "name": "efm_pd_a_ptr",
      "exclude_from_translation": true
    },
    {
      "name": "block_chars",
      "value": "block",
      "exclude_from_translation": true
    },
    {
      "name": "chars_type",
      "value": "_type",
      "exclude_from_translation": true
    },
    {
      "name": "chars_text",
      "value": "_text",
      "exclude_from_translation": true
    },
    {
      "name": "remove_paragraph_space",
      "value": "margin-top: -5px",
      "exclude_from_translation": true
    },
    {
      "name": "mls_button_text",
      "exclude_from_translation": true
    },
    {
      "name": "paragraph_space",
      "value": "margin-top: 0px",
      "exclude_from_translation": true
    },
    {
      "name": "number",
      "value": 1,
      "exclude_from_translation": true
    },
    {
      "name": "number_two",
      "value": 2,
      "exclude_from_translation": true
    },
    {
      "name": "number_three",
      "value": 3,
      "exclude_from_translation": true
    },
    {
      "name": "block_num_chars_two",
      "value": "@local.block_chars@local.number_two",
      "exclude_from_translation": true
    },
    {
      "name": "block_num_chars_three",
      "value": "@local.block_chars@local.number_three",
      "exclude_from_translation": true
    },
    {
      "name": "block_num_chars",
      "value": "@local.block_chars@local.number",
      "exclude_from_translation": true
    },
    {
      "name": "block_type",
      "value": "local.efm_pd_a_ptr.@local.block_num_chars@local.chars_type",
      "exclude_from_translation": true
    },
    {
      "name": "block_text",
      "value": "local.efm_pd_a_ptr.@local.block_num_chars@local.chars_text",
      "exclude_from_translation": true
    },
    {
      "name": "now",
      "value": "@calc(timestamp())",
      "exclude_from_translation": true
    },
    {
      "name": "book_click_history",
      "value": "_book_click_history",
      "exclude_from_translation": true
    },
    {
      "type": "begin_display_group",
      "name": "intro_text",
      "condition": "@@local.block_type == \"all_text\"",
      "style_list": "@local.paragraph_space",
      "exclude_from_translation": true
    },
    {
      "name": "paragraph_space",
      "value": "@local.remove_paragraph_space",
      "exclude_from_translation": true
    },
    {
      "type": "text",
      "name": "display_text",
      "value": "@@local.block_text",
      "exclude_from_translation": true
    },
    {
      "type": "end_display_group",
      "exclude_from_translation": true
    },
    {
      "name": "sb_list_id_name",
      "value": "@local.efm_pd_a_ptr.sb_list_id",
      "exclude_from_translation": true
    },
    {
      "name": "act_list_id_name",
      "value": "@local.efm_pd_a_ptr.act_list_id",
      "exclude_from_translation": true
    },
    {
      "name": "dont_do_sbs_and_acts_lists",
      "value": "@local.act_list_id_name == \"\"",
      "exclude_from_translation": true
    },
    {
      "name": "dont_do_sbs_list",
      "value": "@local.sb_list_id_name == \"\"",
      "exclude_from_translation": true
    },
    {
      "type": "begin_display_group",
      "name": "sb_and_act_accordions",
      "condition": "@local.dont_do_sbs_and_acts_lists == \"false\"",
      "parameter_list": "style:column"
    },
    {
      "name": "accordion_label_1",
      "value": "Activity list"
    },
    {
      "name": "accordion_label_2",
      "value": "Storybook list"
    },
    {
      "type": "begin_accordion",
      "name": "acoordion",
      "exclude_from_translation": true
    },
    {
      "type": "begin_accordion_section",
      "name": "bloxk_1",
      "value": "@local.accordion_label_1",
      "exclude_from_translation": true
    },
    {
      "type": "begin_display_group",
      "name": "activity_buttons",
      "parameter_list": "style:column",
      "exclude_from_translation": true
    },
    {
      "type": "begin_items",
      "name": "make_buttons_for_activities",
      "value": "@data.@local.act_list_id_name",
      "exclude_from_translation": true
    },
    {
      "name": "next_activ",
      "value": "data.efm_act_v_two.@item.act_list_id",
      "exclude_from_translation": true
    },
    {
      "name": "next_activ_ptr",
      "value": "@@local.next_activ",
      "exclude_from_translation": true
    },
    {
      "name": "activ_button_text",
      "value": "@local.next_activ_ptr.title",
      "exclude_from_translation": true
    },
    {
      "type": "button",
      "name": "button_@local.activ_button_text",
      "value": "@local.activ_button_text",
      "action_list": "click | set_field:current_activity: @local.next_activ;\nclick | go_to: efm_activity_v_two_template",
      "parameter_list": "style: short; \ntext_align: center",
      "exclude_from_translation": true
    },
    {
      "type": "end_items",
      "exclude_from_translation": true
    },
    {
      "type": "end_display_group",
      "exclude_from_translation": true
    },
    {
      "type": "end_accordion_section",
      "exclude_from_translation": true
    },
    {
      "type": "begin_accordion_section",
      "name": "bloxk_2",
      "value": "@local.accordion_label_2",
      "condition": "@local.dont_do_sbs_list == \"false\"",
      "exclude_from_translation": true
    },
    {
      "type": "begin_display_group",
      "name": "storybook_buttons",
      "parameter_list": "style:column",
      "exclude_from_translation": true
    },
    {
      "type": "begin_items",
      "name": "make_buttons_for_storybooks",
      "value": "@data.@local.sb_list_id_name",
      "exclude_from_translation": true
    },
    {
      "name": "book_id",
      "value": "@item.sb_list_id",
      "exclude_from_translation": true
    },
    {
      "name": "click_history_field_name",
      "value": "@local.book_id@local.book_click_history",
      "exclude_from_translation": true
    },
    {
      "name": "books_click_history",
      "value": "@fields.@local.click_history_field_name ;  @local.now",
      "condition": "!!(@fields.@local.click_history_field_name)",
      "exclude_from_translation": true
    },
    {
      "name": "books_click_history",
      "value": "@local.now",
      "condition": "!(@fields.@local.click_history_field_name)",
      "exclude_from_translation": true
    },
    {
      "name": "next_sbook",
      "value": "data.efm_storybooks.@item.sb_list_id",
      "exclude_from_translation": true
    },
    {
      "name": "next_sbook_ptr",
      "value": "@@local.next_sbook",
      "exclude_from_translation": true
    },
    {
      "name": "sbook_button_text",
      "value": "@local.next_sbook_ptr.title",
      "exclude_from_translation": true
    },
    {
      "type": "button",
      "name": "button_@local.sbook_button_text",
      "value": "@local.sbook_button_text",
      "action_list": "click | go_to: @item.sb_list_id; click | set_field:@local.click_history_field_name: @local.books_click_history",
      "parameter_list": "style: short; \ntext_align: center",
      "comments": "click | set_field:current_book: @local.next_sbook;\nclick | go_to: efm_story_template",
      "exclude_from_translation": true
    },
    {
      "type": "end_items",
      "exclude_from_translation": true
    },
    {
      "type": "end_display_group",
      "exclude_from_translation": true
    },
    {
      "type": "end_accordion_section",
      "exclude_from_translation": true
    },
    {
      "type": "end_accordion",
      "exclude_from_translation": true
    },
    {
      "type": "end_display_group",
      "exclude_from_translation": true
    },
    {
      "name": "mls_id",
      "value": "@local.efm_pd_a_ptr.mls_id",
      "exclude_from_translation": true
    },
    {
      "type": "text",
      "name": "mls_info",
      "value": "**Math Learning Step**",
      "condition": "@local.mls_id",
      "parameter_list": "text_align:center",
      "style_list": "margin-top: -3px;"
    },
    {
      "name": "current_mls",
      "value": "data.efm_mls.@local.mls_id",
      "condition": "@local.mls_id",
      "exclude_from_translation": true
    },
    {
      "name": "mls_ptr",
      "value": "@@local.current_mls",
      "condition": "@local.mls_id",
      "exclude_from_translation": true
    },
    {
      "name": "mls_button_text",
      "value": "@local.mls_ptr.title",
      "condition": "@local.mls_id",
      "exclude_from_translation": true
    },
    {
      "type": "button",
      "name": "mls_button",
      "value": "@local.mls_button_text",
      "action_list": "click | set_field:current_mls: data.efm_mls.@local.mls_id;\nclick | go_to: efm_mls_template",
      "condition": "@local.mls_id",
      "parameter_list": "style: short; \ntext_align: center",
      "exclude_from_translation": true
    },
    {
      "name": "sb_id",
      "value": "@local.efm_pd_a_ptr.sb_id",
      "exclude_from_translation": true
    },
    {
      "type": "text",
      "name": "storybook_info",
      "value": "**Storybook**",
      "condition": "@local.sb_id",
      "parameter_list": "text_align:center"
    },
    {
      "name": "sb_description_block_text_two",
      "value": "local.efm_pd_a_ptr.@local.block_num_chars_two@local.chars_text",
      "exclude_from_translation": true
    },
    {
      "type": "text",
      "name": "sb_description",
      "value": "@@local.sb_description_block_text_two",
      "style_list": "margin-top: -8px;",
      "exclude_from_translation": true
    },
    {
      "name": "current_sb",
      "value": "data.efm_storybooks.@local.sb_id",
      "condition": "@local.sb_id",
      "exclude_from_translation": true
    },
    {
      "name": "sb_ptr",
      "value": "@@local.current_sb",
      "condition": "@local.sb_id",
      "exclude_from_translation": true
    },
    {
      "name": "sb_button_text",
      "value": "@local.sb_ptr.title",
      "condition": "@local.sb_id",
      "exclude_from_translation": true
    },
    {
      "name": "click_history_field_name",
      "value": "@local.sb_id@local.book_click_history",
      "exclude_from_translation": true
    },
    {
      "name": "books_click_history",
      "value": "@fields.@local.click_history_field_name ;  @local.now",
      "condition": "!!(@fields.@local.click_history_field_name)",
      "exclude_from_translation": true
    },
    {
      "name": "books_click_history",
      "value": "@local.now",
      "condition": "!(@fields.@local.click_history_field_name)",
      "exclude_from_translation": true
    },
    {
      "type": "button",
      "name": "sb_button",
      "value": "@local.sb_button_text",
      "action_list": "click | go_to: @local.sb_id; \nclick | set_field:@local.click_history_field_name: @local.books_click_history",
      "condition": "@local.sb_id",
      "parameter_list": "style: short; \ntext_align: center",
      "comments": "click | go_to: @item.sb_list_id; click | set_field:@local.click_history_field_name: @local.books_click_history",
      "exclude_from_translation": true
    },
    {
      "name": "act_one_id",
      "value": "@local.efm_pd_a_ptr.act_1_id",
      "exclude_from_translation": true
    },
    {
      "name": "act_two_id",
      "value": "@local.efm_pd_a_ptr.act_2_id",
      "exclude_from_translation": true
    },
    {
      "name": "act_three_id",
      "value": "@local.efm_pd_a_ptr.act_3_id",
      "exclude_from_translation": true
    },
    {
      "name": "act_four_id",
      "value": "@local.efm_pd_a_ptr.act_4_id",
      "exclude_from_translation": true
    },
    {
      "type": "text",
      "name": "activity_info",
      "value": "**Activities**",
      "condition": "@local.act_one_id",
      "parameter_list": "text_align:center"
    },
    {
      "name": "act_description_block_text_three",
      "value": "local.efm_pd_a_ptr.@local.block_num_chars_three@local.chars_text",
      "exclude_from_translation": true
    },
    {
      "type": "text",
      "name": "activities_description",
      "value": "@@local.act_description_block_text_three",
      "style_list": "margin-top: -8px;",
      "exclude_from_translation": true
    },
    {
      "name": "current_act_one",
      "value": "data.efm_act_v_two.@local.act_one_id",
      "condition": "@local.act_one_id",
      "exclude_from_translation": true
    },
    {
      "name": "act_one_ptr",
      "value": "@@local.current_act_one",
      "condition": "@local.act_one_id",
      "exclude_from_translation": true
    },
    {
      "name": "act_one_button_text",
      "value": "@local.act_one_ptr.title",
      "condition": "@local.act_one_id",
      "exclude_from_translation": true
    },
    {
      "name": "current_act_two",
      "value": "data.efm_act_v_two.@local.act_two_id",
      "condition": "@local.act_two_id",
      "exclude_from_translation": true
    },
    {
      "name": "act_two_ptr",
      "value": "@@local.current_act_two",
      "condition": "@local.act_two_id",
      "exclude_from_translation": true
    },
    {
      "name": "act_two_button_text",
      "value": "@local.act_two_ptr.title",
      "condition": "@local.act_two_id",
      "exclude_from_translation": true
    },
    {
      "name": "current_act_three",
      "value": "data.efm_act_v_two.@local.act_three_id",
      "condition": "@local.act_three_id",
      "exclude_from_translation": true
    },
    {
      "name": "act_three_ptr",
      "value": "@@local.current_act_three",
      "condition": "@local.act_three_id",
      "exclude_from_translation": true
    },
    {
      "name": "act_three_button_text",
      "value": "@local.act_three_ptr.title",
      "condition": "@local.act_three_id",
      "exclude_from_translation": true
    },
    {
      "name": "current_act_four",
      "value": "data.efm_act_v_two.@local.act_four_id",
      "condition": "@local.act_four_id",
      "exclude_from_translation": true
    },
    {
      "name": "act_four_ptr",
      "value": "@@local.current_act_four",
      "condition": "@local.act_four_id",
      "exclude_from_translation": true
    },
    {
      "name": "act_four_button_text",
      "value": "@local.act_four_ptr.title",
      "condition": "@local.act_four_id",
      "exclude_from_translation": true
    },
    {
      "type": "button",
      "name": "sb_button_one",
      "value": "@local.act_one_button_text",
      "action_list": "click | set_field:current_activity: data.efm_act_v_two.@local.act_one_id;\nclick | go_to: efm_activity_v_two_template",
      "condition": "@local.act_one_id",
      "parameter_list": "style: short; \ntext_align: center",
      "exclude_from_translation": true
    },
    {
      "type": "button",
      "name": "sb_button_two",
      "value": "@local.act_two_button_text",
      "action_list": "click | set_field:current_activity: data.efm_act_v_two.@local.act_two_id;\nclick | go_to: efm_activity_v_two_template",
      "condition": "@local.act_two_id",
      "parameter_list": "style: short; \ntext_align: center",
      "exclude_from_translation": true
    },
    {
      "type": "button",
      "name": "sb_button_three",
      "value": "@local.act_three_button_text",
      "action_list": "click | set_field:current_activity: data.efm_act_v_two.@local.act_three_id;\nclick | go_to: efm_activity_v_two_template",
      "condition": "@local.act_three_id",
      "parameter_list": "style: short; \ntext_align: center",
      "exclude_from_translation": true
    },
    {
      "type": "button",
      "name": "sb_button_four",
      "value": "@local.act_four_button_text",
      "action_list": "click | set_field:current_activity: data.efm_act_v_two.@local.act_four_id;\nclick | go_to: efm_activity_v_two_template",
      "condition": "@local.act_four_id",
      "parameter_list": "style: short; \ntext_align: center",
      "exclude_from_translation": true
    }
  ]
}